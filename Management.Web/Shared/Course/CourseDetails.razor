
@using CanvasModel.EnrollmentTerms
@using Management.Web.Shared.Module
@using Management.Web.Shared.Semester

@inject CoursePlanner planner

@code
{
  private bool showEditCourseSettings = false;
  protected override void OnInitialized()
  {
    planner.StateHasChanged += reload;
  }
  private void reload()
  {
    this.InvokeAsync(this.StateHasChanged);
  }
  public void Dispose()
  {
    planner.StateHasChanged -= reload;
  }
}
<br>

@if(!showEditCourseSettings)
{
  <button class="btn btn-outline-secondary" @onclick="@(() => showEditCourseSettings = true)">Edit Course Settings</button>
}
else
{
  <CourseSettings />
  <button 
    class="btn btn-outline-secondary" 
    @onclick="@(() => showEditCourseSettings = false)"
  >
    Done Editing Course Settings
  </button>
}


<div class="row">
  <div class="col overflow-y-auto border rounded " style="max-height: 95vh;">
    @if (planner.LocalCourse != null)
    {
      <div class="py-2">

        @foreach (var month in SemesterPlanner.GetMonthsBetweenDates(planner.LocalCourse.StartDate, planner.LocalCourse.EndDate))
        {
          <MonthDetail Month="month" />
          <hr />
        }
      </div>
    }
  </div>
  <div class="col-4  overflow-y-auto" style="max-height: 95vh;">
    <Modules />
  </div>
</div>